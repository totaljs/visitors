!function(){var e=navigator,s=window,n=s.localStorage,o=location,a=o.hostname;if(n&&(null==e.onLine||e.onLine)&&!/\d\.\d\.\d|^(http:)/.test(a)){function t(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){var e=this;if(4===e.readyState){if(200===e.status){var t=e.responseText;(u=t)&&n.setItem(i,t);var r=o.pathname;m!==r&&(m=r,s.$visitorscounter=0),s.$visitorscounter?s.$visitorscounter++:s.$visitorscounter=1}t&&6!==s.$visitorscounter&&200===e.status||clearInterval(s.$visitorsinterval)}},r.open('GET','https://visitors.totaljs.com/'+e),r.setRequestHeader('X-Ping',o.pathname),r.setRequestHeader('X-Requested-With','XMLHttpRequest'),document.referrer&&r.setRequestHeader('X-Referrer',document.referrer),t&&r.setRequestHeader('X-Reading','1'),r.setRequestHeader('X-Host',a),r.send()}var i='visitor',u=n.getItem(i)||'',m=o.pathname;try{var r=i+'test';localStorage.setItem(r,'1');var c='1'===n.getItem(r);if(n.removeItem(r),!c)return}catch(e){return}for(var d,v='?id='+u,l={},f=o.href.slice(o.href.indexOf('?')+1).split('&'),p=0;p<f.length;p++){var h=f[p].split('=');if(2===h.length){var R=decodeURIComponent(h[0]),g=decodeURIComponent(h[1]);l[R]=g}}(l.utm_medium||l.utm_source||l.campaign_id)&&(v='&utm_medium=1'),s.user?s.user.name?d=s.user.name+'':s.user.nick&&(d=s.user.nick+''):s.username?d=s.username+'':l.utm_user&&(d=l.utm_user),d&&(v+='&utm_user='+encodeURIComponent(d)),t(v),s.$visitorsinterval=setInterval(function(){t('?id='+u+(d?'&utm_user='+encodeURIComponent(d):''),!0)},3e4)}}();