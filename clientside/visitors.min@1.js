!function(){var e=navigator,s=window,n=s.localStorage,o=location,i=o.hostname;if(n&&(null==e.onLine||e.onLine)&&!/\d\.\d\.\d|^(http:)/.test(i)){var a='visitor',u=n.getItem(a)||'',t=function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){var e=this;if(4===e.readyState){if(200===e.status){var t=e.responseText;(u=t)&&n.setItem(a,t),s.$visitorscounter?s.$visitorscounter++:s.$visitorscounter=1}t&&6!==s.$visitorscounter&&200===e.status||clearInterval(s.$visitorsinterval)}},r.open('GET','https://visitors.totaljs.com/'+e),r.setRequestHeader('X-Ping',o.pathname),r.setRequestHeader('X-Requested-With','XMLHttpRequest'),document.referrer&&r.setRequestHeader('X-Referrer',document.referrer),t&&r.setRequestHeader('X-Reading','1'),r.setRequestHeader('X-Host',i),r.send()};try{var r=a+'test';localStorage.setItem(r,'1');var m='1'===n.getItem(r);if(n.removeItem(r),!m)return}catch(e){return}for(var d,c='?id='+u,v={},l=o.href.slice(o.href.indexOf('?')+1).split('&'),f=0;f<l.length;f++){var p=l[f].split('=');if(2===p.length){var R=decodeURIComponent(p[0]),h=decodeURIComponent(p[1]);v[R]=h}}(v.utm_medium||v.utm_source||v.campaign_id)&&(c='&utm_medium=1'),s.user?s.user.name?d=s.user.name+'':s.user.nick&&(d=s.user.nick+''):s.username?d=s.username+'':v.utm_user&&(d=v.utm_user),d&&(c+='&utm_user='+encodeURIComponent(d)),t(c),s.$visitorsinterval=setInterval(function(){t('?id='+u+(d?'&utm_user='+encodeURIComponent(d):''),!0)},3e4)}}();